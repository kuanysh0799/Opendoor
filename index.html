<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"/>
  <title>OpenDoor CRM</title>
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="apple-touch-icon" href="./apple-touch-icon.png">
  <link rel="icon" href="./icon-192.png" type="image/png">
  <meta name="theme-color" content="#0f172a">
  <link rel="stylesheet" href="./styles.css">
</head>
<body>
<header class="od-appbar">
  <div class="od-left">
    <img src="./apple-touch-icon.png" alt="OpenDoor" class="od-logo">
    <div class="od-title">
      <div class="name">OpenDoor CRM</div>
      <div class="sub">–ü—Ä–æ–¥–∞–∂–∏ –¥–≤–µ—Ä–µ–π ¬∑ PWA</div>
    </div>
  </div>

  <div class="od-right">
    <button id="themeBtn" class="od-icon" aria-label="–¢–µ–º–∞">üåì</button>
    <div id="userChip" class="od-user hidden">
      <span id="userName">‚Äî</span>
      <button id="logoutBtn" class="od-btn od-btn--ghost">–í—ã–π—Ç–∏</button>
    </div>
    <button id="loginBtn" class="od-btn od-btn--primary">–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google</button>
  </div>
</header>

<nav class="od-tabs">
  <button class="od-tab od-tab--active" data-tab="funnel">–í–æ—Ä–æ–Ω–∫–∞</button>
  <button class="od-tab" data-tab="deals">–°–¥–µ–ª–∫–∏</button>
  <button class="od-tab" data-tab="clients">–ö–ª–∏–µ–Ω—Ç—ã</button>
  <button class="od-tab" data-tab="reports">–û—Ç—á—ë—Ç—ã</button>
  <button class="od-tab" data-tab="settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
</nav>

<main class="od-page">
  <!-- –í–æ—Ä–æ–Ω–∫–∞ -->
  <section id="tab-funnel" class="od-view od-view--active">
    <div class="od-kanban" id="kanban">
      <!-- –∫–æ–ª–æ–Ω–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –∏–∑ JS -->
    </div>
    <button id="addDealBtn" class="od-fab">+</button>
  </section>

  <!-- –°–¥–µ–ª–∫–∏ (—Å–ø–∏—Å–æ–∫) -->
  <section id="tab-deals" class="od-view">
    <div class="od-toolbar">
      <input id="dealSearch" class="od-input" placeholder="–ü–æ–∏—Å–∫ —Å–¥–µ–ª–∫–∏...">
    </div>
    <div id="dealList" class="od-list"></div>
  </section>

  <!-- –ö–ª–∏–µ–Ω—Ç—ã -->
  <section id="tab-clients" class="od-view">
    <div class="od-toolbar">
      <input id="clientSearch" class="od-input" placeholder="–ü–æ–∏—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞ (–∏–º—è/—Ç–µ–ª–µ—Ñ–æ–Ω)...">
    </div>
    <div id="clientList" class="od-list"></div>
  </section>

  <!-- –û—Ç—á—ë—Ç—ã/–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Äî –∑–∞–≥–ª—É—à–∫–∏ -->
  <section id="tab-reports" class="od-view"><div class="od-empty">–û—Ç—á—ë—Ç—ã —Å–∫–æ—Ä–æ üë∑‚Äç‚ôÇÔ∏è</div></section>
  <section id="tab-settings" class="od-view"><div class="od-empty">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∫–æ—Ä–æ üë∑‚Äç‚ôÇÔ∏è</div></section>
</main>

<!-- –î–∏–∞–ª–æ–≥ –Ω–æ–≤–æ–π —Å–¥–µ–ª–∫–∏ -->
<dialog id="dealDialog" class="od-dialog">
  <form method="dialog" class="od-form">
    <h3>–ù–æ–≤–∞—è —Å–¥–µ–ª–∫–∞</h3>
    <label>–ö–ª–∏–µ–Ω—Ç<input id="dlgClient" class="od-input" required></label>
    <label>–¢–µ–ª–µ—Ñ–æ–Ω<input id="dlgPhone" class="od-input" inputmode="tel"></label>
    <label>–ë—é–¥–∂–µ—Ç (‚Ç∏)<input id="dlgBudget" class="od-input" inputmode="numeric"></label>
    <label>–ò—Å—Ç–æ—á–Ω–∏–∫
      <select id="dlgSource" class="od-input">
        <option>Instagram</option><option>WhatsApp</option><option>2–ì–ò–°</option>
        <option>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</option><option>–û–±—ä—è–≤–ª–µ–Ω–∏–µ</option><option>–í–∏–∑–∏—Ç –≤ –º–∞–≥–∞–∑–∏–Ω</option>
      </select>
    </label>
    <menu class="od-actions">
      <button value="cancel" class="od-btn od-btn--ghost">–û—Ç–º–µ–Ω–∞</button>
      <button id="dlgSave" value="default" class="od-btn od-btn--primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    </menu>
  </form>
</dialog>

<script>
  // –ø—Ä–æ—Å—Ç—ã–µ –≤–∫–ª–∞–¥–∫–∏
  document.querySelectorAll(".od-tab").forEach(btn=>{
    btn.addEventListener("click",()=>{
      document.querySelectorAll(".od-tab").forEach(b=>b.classList.remove("od-tab--active"));
      document.querySelectorAll(".od-view").forEach(v=>v.classList.remove("od-view--active"));
      btn.classList.add("od-tab--active");
      document.getElementById("tab-"+btn.dataset.tab).classList.add("od-view--active");
    });
  });
  // —Ç–µ–º–∞
  const themeBtn=document.getElementById('themeBtn');
  themeBtn?.addEventListener('click',()=>{
    const t=document.documentElement.dataset.theme==='dark'?'light':'dark';
    document.documentElement.dataset.theme=t; localStorage.setItem('od_theme',t);
  });
  document.documentElement.dataset.theme=localStorage.getItem('od_theme')||'dark';
</script>
<script type="module" src="./app.js"></script>
</body>
</html>
